<div class="profile-header"><!-- Profile header -->
  <div class="profile-header-wrapper">
    <div class="row">
      <div class="col-md-3"><!-- Profile picture -->
        <img src="{{ user.profile_pic.url }}" class="profile-picture">
      </div>

      <div class="profile-info col-md-9"><!-- Profile information -->
        <h2>{{ user.username }}</h2>
        <p class="role" ng-if="user.is_artist"><strong>Artist</strong></p>
        <p>Joined </p>
        <p ng-if="user.is_artist"><strong>{{ user.passive_relationships.length }}</strong> Followers</p>
        <p ng-if="!user.is_artist"><strong>{{ user.active_relationships.length }}</strong> Following</p>
        <p>{{ user.bio }}</p>

        <div ng-controller="RelationshipController" ng-if="user.is_artist && !currentUser.is_artist">

          <form ng-submit="followUser(currentUser.id, user.id)" novalidate>
            <button ng-hide="followingThisUser">Follow</button>
          </form>

          <form ng-submit="unfollowUser(currentUser.id)" novalidate>
            <button ng-show="followingThisUser">Unfollow</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="wrapper">
  <div ng-controller="ProfileController"><!-- Profile body -->
    <div class="profile-content-tabs"><!-- Nav -->
      <ul class="nav nav-pills" ng-if="!user.is_artist" ng-init="$parent.tab = 1"><!-- Nav pills -->
        <li ng-class="{ active:isSelected(1) }">
          <a href ng-click="$parent.selectTab(1)">Activity Feed</a>
        </li>
        <li ng-class="{ active:isSelected(2) }">
          <a href ng-click="$parent.selectTab(2)">Likes</a>
        </li>
        <li ng-class="{ active:isSelected(3) }">
          <a href ng-click="$parent.selectTab(3)">Artists</a>
        </li>
      </ul>
      <ul class="nav nav-pills" ng-if="user.is_artist" ng-init="$parent.tab = 4"><!-- Nav pills -->
        <li ng-class="{ active:isSelected(4) }">
          <a href ng-click="$parent.selectTab(4)">Artworks</a>
        </li>
        <li ng-class="{ active:isSelected(5) }">
          <a href ng-click="$parent.selectTab(5)">Map</a>
        </li>
        <li ng-if="currentUser.id === user.id" ng-class="{ active:isSelected(6) }">
          <a href ng-click="$parent.selectTab(6)">Add Artwork</a>
        </li>
      </ul>
    </div>
    
    <div><!-- Content -->
      <div ng-if="isSelected(1)"><!-- Activity Feed -->
        <div ng-repeat="artwork in followedArtistArtworks | orderBy: '-created_at'">
          <img src="{{ artwork.user.profile_pic.url }}" class="activity-feed-profile-pic">
          <p>{{ artwork.user.username }} has posted a new artwork!</p>
        </div>
      </div>
      <div ng-if="isSelected(2)"><!-- Likes -->
        <div class="card-container">
          <div class="row">
            <div ng-repeat="artwork in likedArtworks | orderBy: '-created_at'" class="col-md-3">
              <artwork-cards></artwork-cards>
            </div>
          </div>
        </div>
      </div>
      <div ng-if="isSelected(3)"><!-- Artists -->
          <div ng-repeat="artist in followedArtists"><!-- Artist card -->
            <a ng-href="#/users/{{ artist.id }}/profile">
              <div><!-- Card wrapper -->
                <img src="http://lorempixel.com/150/100/abstract">
                <h4>{{ artist.username }}</h4>
                <p>{{ artist.bio }}</p>
              </div>
            </a>
          </div>
      </div>

      <div ng-show="isSelected(4)"><!-- Artworks -->
        <div class="card-container">
          <div class="row">
            <div ng-repeat="artwork in userArtworks | orderBy: '-created_at'" class="col-md-3">
              <artwork-cards></artwork-cards>
            </div>
          </div>
        </div>
      </div>

      <div ng-if="isSelected(5)"><!-- Map -->
        <artist-artwork-map></artist-artwork-map>
      </div>
      <div ng-if="isSelected(6)"><!-- Add artwork form -->
        <new-artwork-form></new-artwork-form>
      </div>
    </div>
  </div>
</div>